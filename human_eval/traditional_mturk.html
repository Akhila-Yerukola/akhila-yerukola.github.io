<html lang="en">
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <!-- BOOTSTRAP CSS -->
  <link
    rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
    crossorigin="anonymous"
  />
  <!-- HITPUB CSS -->
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700,700i"
    rel="stylesheet"
  />

  <!-- HIT START -->
  <div id="hit" class="container">
    
    <div class="col-12 mb-1">
      <div class="row mt-4 mb-3 pl-1 pt-1 pb-1 border">
        <div class="col-12">
          <!-- INTRO WITH CONSENT START -->
            <div class="container">
            <div class="row mt-4">
              <div class="col-12">
                <section
                  class="container"
                  id="preInstruction"
                  style="
                    margin-bottom: 0px;
                    padding: 0px 0px;
                    font-family: Verdana, Geneva, sans-serif;
                    color: #333333;
                  "
                >
                  <div class="card">
                    <div
                      class="card-header"
                      style="
                        color: #fff;
                        background-color: #337ab7;
                        border-color: #337ab7;
                      "
                    >
                      <strong>Instructions</strong>
                    </div>
                    <div class="card-body">
                      You will be given a statement and two stylistic rewrites of the statement. You need to rank their quality based on fluency, content preservation, style and overall fit. 
                     This should take about X minutes to complete.
                      <br />
                      
                      <br />
                      <small>
                        <strong>Background on our research project</strong>
                        <p>
                          Here at CMU, we are passionate about understanding how
                          potentially stereotyped language can be used against
                          certain demographics/groups of people (e.g. racism,
                          sexism, etc.). More specifically, we are studying
                          degree of truthfulness of generalizing statements
                          about people. This task will qualify you for the
                          future task where we will ask for your ratings on the
                          degree of truthfulness in such statements.
                        </p>
                        <!-- <h5>Background on our research project</h5>
                          <p>
                            Here at CMU, we are passionate about understanding how
                            potentially stereotyped language can be used against certain
                            demographics/groups of people (e.g. racism, sexism, etc.).
                            More specifically, we are studying degree of truthfulness of
                            generalizing statements about people. This task will qualify
                            you for the future task where we will ask for your ratings
                            on the degree of truthfulness in such statements.
                          </p> -->
                        <p>
                          <strong>Data collection & sharing</strong><br />
                          We will not ask you for your name, and the data
                          collected in this study will be made unidentifiable to
                          the best of our extent. We will securely store the
                          data on our servers and only share with qualified
                          researchers (e.g., who want to further the study of
                          hate speech detection). If you later decide that you
                          do not want your responses included in this study,
                          please email so we can exclude your work.
                        </p>
                      </small>
                    </div>
                  </div>
                </section>
              </div>
              <!-- <div class="col-4">
                <small>
                  <p>
                    <strong>Data collection & sharing</strong><br />
                    We will not ask you for your name, and the data collected in
                    this study will be made unidentifiable to the best of our
                    extent. We will securely store the data on our servers and
                    only share with qualified researchers (e.g., who want to
                    further the study of hate speech detection). If you later
                    decide that you do not want your responses included in this
                    study, please email so we can exclude your work.
                  </p>
                </small>
              </div> -->
            </div>
            <div
              class="row"
              id="consent"
              style="margin-top: 30px; margin-bottom: 30px"
            >
              <div class="col-12">
                <h6>
                  You have read and understood the instructions and agree to do
                  the task
                </h6>
                <div class="form-check">
                  <label class="form-check-label">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="consent"
                      name="consent"
                      onclick="toggleConsent(this.checked)"
                    />
                    By ticking this box, you are agreeing to be part of this
                    data collection study. To save a copy of the consent form
                    and instructions, you can save/print this webpage. Be sure
                    that questions you have about the study have been answered
                    and that you understand what you are being asked to do. You
                    may contact us if you think of a question later. You are
                    free to release/quit the HIT at any time, and refusing to be
                    in the experiment or stopping participation will involve no
                    penalty or loss of benefits to which you are otherwise
                    entitled.
                  </label>
                </div>
                <br />
                <div
                  class="alert alert-warning"
                  id="consentMessage"
                  style="max-width: 400px; margin: auto"
                >
                  You must check the box to continue the task!
                </div>
                <div style="display: none">
                  <input
                    name="clickedConsentTime"
                    id="clickedConsentTime"
                    type="text"
                    placeholder=""
                  />
                  <input
                    name="clickedSubmitTime"
                    id="clickedSubmitTime"
                    type="text"
                    placeholder=""
                  />
                </div>
              </div>
            </div>
            </div>
            <!-- INTRO WITH CONSENT END -->

            <!-- EXAMPLES START -->
            <!--style="display: none"-->
            <div class="panel-group" id="actualTask">
                <div class="panel panel-default">
                <div class="panel-heading" >
                    <h4 class="panel-title"> 
                    Full Instructions &nbsp; &nbsp; <a data-toggle="collapse" href="#collapse0" style="color:#0080ff;font-weight:normal;text-decoration: underline;">(Expand/Collapse)</a> 
                    </h4>
                </div>
                <div id="collapse0" class="collapse0 show" style="margin:10px">
                    <div class="container-fluid" style="padding:15px;margin:10px">
                    <div class="row">
                        <div class="col-sm-8">
                        <h4>Instructions</h4> 
                        Thanks for participating in this new task!
                        We are trying to test out a few automatic systems for rewriting sentences with a particular style attribute. 
                        <br>
                        Given an utterance from a dialog or a document, an instruction regarding the required target style attribute and two automatically generated rewrites, please answer the following four questions about the rewrites:
                        <ul>
                            <li><strong>Style</strong><br>Which of the rewritten utterances best exhibits the <em>required style attribute transfer </em> as in the instruction (regardless of meaning preservation)? </li>
                            <li><strong>Meaning</strong><br>Which do you think is <em>closer in the intended meaning to the original</em> utterance</span> (regardless of the style change)?</li>
                            <!--<li><strong>Fluency</strong><br>Which of the rewritten utterances is the <em>most fluent</em> (regardless of meaning preservation)?</li>!-->
                            <li><strong>Well-suited</strong><br>Which of the rewritten utterances is <em>most well suited </em> to the entire context?</li>
                            
                        </ul>            
                        Some notes:
                        <ul>
                            <li>What is <b>style strength</b>?<br> Style tranfer strength determines how well the rewrites exhibit the target style attribute necessary. We define style with attributes like sentiment, toxicity and formality. <br />  <br /> 
                              <span class="task_sentiment"> For example, a sentence exhibiting a <em> positive </em> sentiment about a restaurant would describe the food as being delicious and the dining environment as vibrant. On the flip side, a sentence with a <em>negative</em> sentiment about a restaurant might describe the food as unhygenic and the dining environment to be unpleasant. </span> 
                              <span class="task_formality"> For example, a sentence which sounds serious/less trivial, polite/less casual might be percieved as <i>formal</i> language</span>
                              <span class="task_toxicity"> For example, an utterance which is obscene, indecent, insulting, hurtful, disgusting, morally repugnant, or which breaches commonly accepted standards of decent and proper speech is considered as <i>toxic/offensive</i> language.</span>
                            </li>  
                            <li>What is <b>meaning similarity</b>?<br>Two sentences are similar in meaning or overall content if they describe <em>roughly the same event(s)</em> and have roughly the same interpretation, irrespective of style attribute differences. But, it's okay if a few details in the sentence get changed a bit.</li>
                            <li>What is <b>well-suited</b>?<br> A rewrite can have the required style attribute and be similar in meaning or overall content of the original sentence, but it may not necessarily be <i>fitting / appropriate / relevant / well-suited</i> in the given context of the dialog or document. The rewrite should be meaningful and coherent while maintaining the flow of the conversation. </li>
                        </ul>
                        </div>
                        <div class="col-sm-4">
                        <p>
                            <h4>Background</h4>
                            We are trying to test out a few different systems for automatically generating sentences, and want to see how they well they tranfer the style attribute while maintaining the meaning in sentences.
                            Machines are not as good at discerning and disentangling concepts like <em>style</em> and <em>meaning</em>, so your help is crucial and very much appreciated!
                        </p>
                        </div>
                
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                        <h4>Examples</h4>
                        <table style="width: 100%; font-size:9pt">
                        <tr>
                            <th style="width: 38%; font-weight:bold">Context &amp; Original Sentence </th> <th style="width: 5%; font-weight:bold">Instruction</th><th style="width: 37%; font-weight:bold">Rewrites</th><th style="width: 5%; font-weight:bold">Style</th>
                            <th style="width: 5%; font-weight:bold">Meaning</th><th style="width: 5%; font-weight:bold">Well-suited</th>
                        </tr>

                        <tr class="task_sentiment">
                            <td rowspan="2" > <p style="background-color:lightgray"> <u><em>Preceding sentences:</em></u> <br /> dr. goldberg offers everything i look for in a general practitioner. he's nice and easy to talk to without being patronizing </p>
                                <u><em>Current sentence:</em></u> <br /> he's always on time in seeing his patients </td>
                            <td rowspan="2">Rewrite the response from <b>positve</b> to <b>negative</b> sentiment.</td>
                            <td> He's never late in seeing his patients.</td><td></td><td></td><td></td>
                        </tr>
                        <tr class="task_sentiment">
                            <td> he's often running behind in seeing his patients
                            </td><td>&#10004;</td><td>&#10004;</td><td>&#10004;</td>
                        </tr>
                        
                        <tr class="task_sentiment">
                          <td rowspan="2" > <p style="background-color:lightgray"> <u><em>Dialog History:</em></u> <br /> Very well , thank you . I'm meeting my wife and daughter for lunch at twelve.Would you care to join us ? </p>
                              <u><em>Response:</em></u> <br /> I'd love to , but I'm afraid I can't . </td>
                          <td rowspan="2">Rewrite the response from <b>negative</b> to <b>positive</b> sentiment.</td>
                          <td> I'm happy to do it !</td><td></td><td>&#10004;</td><td></td>
                        </tr>
                        <tr class="task_sentiment">
                            <td> I would be thrilled to join you all for lunch.
                            </td><td>&#10004;</td><td></td><td>&#10004;</td>
                        </tr>

                        <tr class="task_formality">
                            <td rowspan="2" > <p style="background-color:lightgray"> <u><em>Previous Comment:</em></u> <br /> This is so crazy. We have people all over this world. cameras everywhere and yet a giant ship manages to go missing for almost ten years.  </p>
                                <u><em>Response:</em></u> <br /> Not as many people with cameras in the ocean, duh...And ocean is really big, like REALLY big ;) </td>
                            <td rowspan="2">Rewrite the response from <b>informal</b> to <b>formal</b> language.</td>
                            <td> Fewer people are utilizing cameras in the ocean, as the ocean is immensely vast.</td><td>&#10004;</td><td></td><td></td>
                        </tr>
                        <tr class="task_formality">
                            <td> Not as many people have access to cameras in the ocean, of course. Furthermore, the ocean is vast, making it incredibly easy for a vessel to remain undiscovered for nearly a decade. </td>
                            <td></td><td>&#10004;</td><td>&#10004;</td>
                        </tr>

                        <tr class="task_formality">
                          <td rowspan="2" > <p style="background-color:lightgray"> <u><em>Previous Comment:</em></u> <br /> While reading todays news, I found an interesting text about the investigation on the ISAF and U.S guy, General John Allen.  </p>
                              <u><em>Response:</em></u> <br /> The general is now in the FBI’s spotlight after discovering lots of mails between him and Jill Kelley.  </td>
                          <td rowspan="2">Rewrite the response from <b>informal</b> to <b>formal</b> language.</td>
                          <td> The FBI has initiated an investigation into General John Allen in light of the numerous emails exchanged between him and Jill Kelley.</td><td>&#10004;</td><td></td><td>&#10004;</td>
                        </tr>
                        <tr class="task_formality">
                            <td> The general is now under the FBI's scrutiny following the revelation of numerous correspondences between him and Jill Kelley. </td>
                            <td></td><td>&#10004;</td><td></td>
                        </tr>

                        <tr class="task_formality">
                          <td rowspan="2" > <p style="background-color:lightgray"> <u><em>Previous Sentence in document:</em></u> <br /> Zimbabwe is divided into 8 provinces and 2 cities with provincial status (Harare and Bulawayo).  </p>
                              <u><em>Response:</em></u> <br /> The current Legal Aid Directorate (LAD) is staffed by 15 lawyers, all based in Harare, representing the needs of Zimbabwe's 12 million citizens.  </td>
                          <td rowspan="2">Rewrite the response from <b>formal</b> to <b>informal</b> language.</td>
                          <td> LAD's got 15 lawyers based in Harare, all working to meet the needs of Zimbabwe's 12 million people.</td><td>&#10004;</td><td></td><td>&#10004;</td>
                        </tr>
                        <tr class="task_formality">
                            <td> The Legal Aid Directorate has 15 lawyers in Harare who take care of the needs of the 12 million people living in Zimbabwe. </td>
                            <td></td><td>&#10004;</td><td></td>
                        </tr>
                        
                        <tr class="task_toxicity">
                            <td rowspan="2" > <p style="background-color:lightgray"> <u><em>Dialog History:</em></u> <br />  I have a lot of chinese friends, I'm trying to be humorous. </p>
                                <u><em>Response:</em></u> <br />  Oh, try a joke about Asian people ever eating dogs </td>
                            <td rowspan="2">Rewrite the response from <b>offensive</b> to <b>non or less offensive</b> language.</td>
                            <td> Oh, try a joke about Asian people's love for trying different kinds of cuisine.</td><td></td><td>&#10004;</td><td>&#10004;</td>
                        </tr>
                        <tr class="task_toxicity">
                            <td> No jokes about any group or culture, please. Let's focus on something else. </td><td>&#10004;</td><td></td><td></td>
                        </tr>

                        <tr class="task_toxicity">
                          <td rowspan="2" > <p style="background-color:lightgray"> <u><em>Dialog History:</em></u> <br />  Is your boss as pathetic as mine? I want to push him into moving traffic. </p>
                              <u><em>Response:</em></u> <br />  I feel like strangling my boss. </td>
                          <td rowspan="2">Rewrite the response from <b>offensive</b> to <b>non or less offensive</b> language.</td>
                          <td> I am incredibly frustrated with my boss too!</td><td>&#10004;</td><td>&#10004;</td><td>&#10004;</td>
                        </tr>
                        <tr class="task_toxicity">
                            <td> I feel like expressing my frustration to my boss. </td><td></td><td></td><td></td>
                        </tr>
                        
                       
                        
                        </table>
            
                        <br>
                        Notes/FAQ:
                        <ul>
                        <li> You are welcome to complete more than one HIT!  As long as you take your time and read each HIT carefully, you may complete as many as you want.</li>
                        <li> We estimate that each of these HIT's may take around 1-2 minutes. Please read carefully. (Of course, it's ok if you take slightly more or less time. We know that everyone has different reading speeds). </li>
                        </ul>
                        </div>
                    </div>
                    </div>
                </div>
                </div>
                <!-- EXAMPLES END -->

                <!-- MTURK INPUT START -->
                <div class="container-fluid" id="actualTask">
                    <hr>
                    <h3> Task </h3>
                    <div class="row">
                        <div class="col-sm-11">
                        <div class="story-excerpt" style="min-width:400px;width:50%;background:#eac8ca93">
                        <p style="font-size:12pt;"><b>Previous Context:</b></p>
                        <p><span id="context" style="font-size:12pt;">${context}</span></p>
                        </div>
                        
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-11">
                        <div class="story-excerpt" style="min-width:400px;width:50%;background:#EAC8CA">
                        <p style="font-size:12pt;"><b>Original Sentence:</b></p>
                        <p><span id="original" style="font-size:12pt;word-break:break-all;">${original}</span></p>
                        </div>
                        
                        </div>
                        <p style="padding-left: 2em;"><b>Instruction:</b><span id="instruction" style="font-size:12pt;word-break:break-all;"> Rewrite the original sentence from ${style1} to ${style2}</span></p>
                    </div>

                    <h4>Rewrites:</h4>
                    <div class="row">
                        
                        <div class="col-sm-6">
                            <div class="story-excerpt" style="min-width:300px;width:30%">
                            
                            <p style="font-size:12pt;"><b>rewrite A:</b></p>
                            <div id="rewriteA" style="font-size:12pt;word-break:break-all;">${rewriteA}</div>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="story-excerpt" style="min-width:300px;width:30%">
                            
                            <p style="font-size:12pt;"><b>rewrite B:</b></p> 
                            <div id="rewriteB" style="font-size:12pt;word-break:break-all;">${rewriteB}</div>
                            </div>
                        </div>
                    </div>
                    <!--Questions start here-->
                    <div id="div1" style="margin-left:10px;margin-top:5px;font-size:12pt;line-height:1.5em">
                      Q1: Pretend like you are the speaker, which would you prefer as a rewrite? 
                      <br>
                      <small>Pick the rewrite which you'd pick as more natural to you.  </small>
                      <br>
                      <div style="margin:10px">
                        <table class="questiondiv" style="font-size:14px; ">
                          <tr style="margin-top:1em; border: none">
                          <td style="padding:5pt;"><input type="radio" required name="qNatural" id="r1a" value="a"><label for="r1a">&nbsp; Rewrite A </label></td><td style="word-break:break-all;">${rewriteA}</td></tr>
                          <tr style="border: none"><td style="padding:5pt;"><input type="radio" required name="qNatural" id="r1b" value="b"><label for="r1b">&nbsp; Rewrite B</label></td><td style="word-break:break-all;">${rewriteB}</td></tr>
                        </table>
                      </div>
                    </div>
                      <div id="div1" style="margin-left:10px;margin-top:5px;font-size:12pt;line-height:1.5em">
                        Q2: Which of these best exhibits <b>required style attribute</b> specified in the instruction (regardless of meaning preservation)?
                        <br>
                        <small>Pick the rewrite which is most likely to be associated with the target style in instruction. </small>
                        <br>
                        <div style="margin:10px">
                          <table class="questiondiv" style="font-size:14px; ">
                            <tr style="margin-top:1em; border: none">
                            <td style="padding:5pt;"><input type="radio" required name="qStyle" id="r2a" value="a"><label for="r2a">&nbsp; Rewrite A </label></td><td style="word-break:break-all;">${rewriteA}</td></tr>
                            <tr style="border: none"><td style="padding:5pt;"><input type="radio" required name="qStyle" id="r2b" value="b"><label for="r2b">&nbsp; Rewrite B</label></td><td style="word-break:break-all;">${rewriteB}</td></tr>
                          </table>
                        </div>
                      </div>
                      <br>
                      <div  id="div2" style="margin-left:10px;margin-top:5px;font-size:12pt;line-height:1.5em">
                        Q3: Which do you think is <strong>closer to the intended meaning</strong> of the original sentence  (regardless of style transferred)?
                        <br>
                        <small>Pick the sentence that has the general events and meaning closest to the original. 
                          <span class="task_sentiment"><br /> For this sentiment task, concentrate on meaning preservation of all attribute-independent content i.e independent of sentiment-specific markers. (e.g., what properties of a restaurant are
                            being described)
                          </span>
                        </small>
                        <br>
                        <div style="margin:10px">
                          <table class="questiondiv" style="font-size:14px">
                            <tr style="margin-top:1em; border: none">
                            <td style="padding:5pt;"><input type="radio" required name="qMeaning" id="r3a" value="a"><label for="r3a">&nbsp; Rewrite A </label></td><td style="word-break:break-all;">${rewriteA}</td></tr>
                            <tr style="border: none"><td style="padding:5pt;"><input type="radio" required name="qMeaning" id="r3b" value="b"><label for="r3b">&nbsp; Rewrite B</label></td><td style="word-break:break-all;">${rewriteB}</td></tr>
                          </table>
                        </div>
                      </div>
                      
                      <br>
                      
                      <div  id="div4" style="margin-left:10px;margin-top:5px;font-size:12pt;line-height:1.5em">
                        Q4: Which sentence is best <strong>well-suited / relevant / flows better / specific </strong> the overall conversation / document flow?
                        <br>
                        <small>Try to pick the rewrite that has the best tradeoff between meaning and style, but also is coherent with the preceding context.</small>
                        <br>
                        <div style="margin:10px">
                          <table class="questiondiv" style="font-size:14px">
                            <tr style="margin-top:1em; border: none">
                            <td style="padding:5pt;"><input type="radio" required name="qFit" id="r4a" value="a"><label for="r4a">&nbsp; Rewrite A </label></td><td style="word-break:break-all;">${rewriteA}</td></tr>
                            <tr style="border: none"><td style="padding:5pt;"><input type="radio" required name="qFit" id="r4b" value="b"><label for="r4b">&nbsp; Rewrite B</label></td><td style="word-break:break-all;">${rewriteB}</td></tr>
                          </table>
                        </div>
                      </div>

                      <div
                      class="form-group"
                      style="margin-left:10px;margin-top:5px;font-size:12pt;line-height:1.5em"
                      id="form-group-div5">
                
                        <label for="formControlRange" style="margin-bottom: 1em"
                          >Q5. On a scale of 1-5, how much of the original sentence or meaning should be changed to really transfer the style from ${style1} to ${style2} </label
                        >
                        <div class="ticks" style="width: 100%">
                          <span class="tick" style="word-break:break-all;"> <small>All of it needs <br /> to change </small></span>
                          
                          <span class="tick" style="word-break:break-all;"> <small>Barely anything </small></span>
                        </div>
                        <input
                          type="hidden"
                          id="formRangeQ5Values"
                          name="formRangeQ5Values"
                          value=""
                        />
                        <input
                          type="range"
                          class="form-control-range"
                          min="1"
                          max="5"
                          value="3"
                          id="formRangeQ5"
                          name="formRangeQ5"
                          onInput="handleColors(5)"
                          onchange="handleChange({arg1: 5, arg2: this.value})"
                        />
                        <div class="ticks" id="ticks5">
                          <span class="tick" id="tick1">1</span
                          ><span class="tick" id="tick2">2</span
                          ><span class="tick" id="tick3">3</span
                          ><span class="tick" id="tick4">4</span
                          ><span class="tick" id="tick5">5</span
                          >
                        </div>
                      </div>
                </div>

                <div class="row justify-content-center">
                    <div class="col-9" id="commentSection" style="display: inline-block;text-align: center;">
                      <p style="font-size:10pt;margin-top: 50px;">
                        Optional Feedback: Thanks for filling out the questions above!
                        If something about the hit was unclear, please either leave a comment in the box below!
                        We would like to make this HIT easier for future workers, so we really appreciate feedback though it is optional.
                        <br>
                        If you have concerns or questions, please email us!
                      </p>
                      <textarea style="margin-left:10px;margin-top:10px;width: 95%;" rows="2" name="commentbox"></textarea>
                      <br><br>
                      <center>
                        <div class="alert alert-danger" id="submitAlert" style="display: none;">
                          Whoops you missed some questions!
                          <br>
                          Note: if the submit button is disabled and you're confident this is an error, please screenshot your answers and the console output (Ctrl+Shift+J or Cmd+Shift+J).
                        </div>
                        <input type="submit" id="submitButton" class="btn btn-primary" value="Submit Hit!">
                      </center>
                    </div>
                  </div>
            </div>
            
          
            


            <br>
        </div>
        <!-- MTURK INPUT END -->
      </div>
    </div>
    <!-- HIT END -->
    <!-- BOOSTRAP JS -->
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>

    <script>
      var consentChecked = false;
      var attentionChecks = ["first", "second", "third", "fourth", "fifth"];
      window.onload = function () {
        if (!window.jQuery) {
          // jQuery is not loaded
          alert(
            "Warning: it seems that jquery is disabled on your browser.  This HIT might not work properly without javascript and jquery code enabled (if you have extensions that block jquery or an old browser version, this may prevent the dynamic elements of the HIT from functioning).  Please ensure that you have jquery enabled by temporarily disabling extensions that interfere with jquery and/or trying a different browser version."
          );
        }
        var attnIx = Math.floor(Math.random() * attentionChecks.length);
        console.log(
          "Attention check " + (attnIx + 1) + " " + attentionChecks[attnIx]
        );
        $("#attentionCheckInstr").text(attentionChecks[attnIx]);
        $("#attentionCheckCorrect").val(attnIx + 1);
      };
      function validate() {
        return $(":invalid").length == 0;
      }
      function handleChange(obj) {
        let qIdx = obj.arg1;
        let value = obj.arg2;
        let prevValues = $("#formRangeQ" + qIdx + "Values").val();
        let allValues = prevValues + (prevValues != "" ? "," : "") + value;
        $("#formRangeQ" + qIdx + "Values").val(allValues);
      }
      function handleColors(qIdx) {
        const _R = document.getElementById("formRangeQ" + qIdx);
        var ticks = [].slice.call(
          document.getElementById("ticks" + qIdx).getElementsByTagName("*"),
          0
        );
        for (let i = 0; i < ticks.length; i++) {
          if (i != _R.value - 1) {
            ticks[i].style.color = "gray";
          } else {
            // ticks[i].style.background = 'green';
            ticks[i].style.color = "black";
            ticks[i].style.fontWeight = "bold";
          }
        }
      }
      (function () {
        var e, t;
        (e = this),
          (t = function () {
            var r = {
              startStopTimes: {},
              idleTimeoutMs: 3e4,
              currentIdleTimeMs: 0,
              checkStateRateMs: 250,
              active: !1,
              idle: !1,
              currentPageName: "default-page-name",
              timeElapsedCallbacks: [],
              userLeftCallbacks: [],
              userReturnCallbacks: [],
              trackTimeOnElement: function (e) {
                var t = document.getElementById(e);
                t &&
                  (t.addEventListener("mouseover", function () {
                    r.startTimer(e);
                  }),
                  t.addEventListener("mousemove", function () {
                    r.startTimer(e);
                  }),
                  t.addEventListener("mouseleave", function () {
                    r.stopTimer(e);
                  }),
                  t.addEventListener("keypress", function () {
                    r.startTimer(e);
                  }),
                  t.addEventListener("focus", function () {
                    r.startTimer(e);
                  }));
              },
              getTimeOnElementInSeconds: function (e) {
                var t = r.getTimeOnPageInSeconds(e);
                return t || 0;
              },
              startTimer: function (e, t) {
                if (
                  (e || (e = r.currentPageName), void 0 === r.startStopTimes[e])
                )
                  r.startStopTimes[e] = [];
                else {
                  var n = r.startStopTimes[e],
                    i = n[n.length - 1];
                  if (void 0 !== i && void 0 === i.stopTime) return;
                }
                r.startStopTimes[e].push({
                  startTime: t || new Date(),
                  stopTime: void 0,
                }),
                  (r.active = !0),
                  (r.idle = !1);
              },
              stopAllTimers: function () {
                for (
                  var e = Object.keys(r.startStopTimes), t = 0;
                  t < e.length;
                  t++
                )
                  r.stopTimer(e[t]);
              },
              stopTimer: function (e, t) {
                e || (e = r.currentPageName);
                var n = r.startStopTimes[e];
                void 0 !== n &&
                  0 !== n.length &&
                  (void 0 === n[n.length - 1].stopTime &&
                    (n[n.length - 1].stopTime = t || new Date()),
                  (r.active = !1));
              },
              getTimeOnCurrentPageInSeconds: function () {
                return r.getTimeOnPageInSeconds(r.currentPageName);
              },
              getTimeOnPageInSeconds: function (e) {
                var t = r.getTimeOnPageInMilliseconds(e);
                return void 0 === t ? void 0 : t / 1e3;
              },
              getTimeOnCurrentPageInMilliseconds: function () {
                return r.getTimeOnPageInMilliseconds(r.currentPageName);
              },
              getTimeOnPageInMilliseconds: function (e) {
                var t = r.startStopTimes[e];
                if (void 0 !== t) {
                  for (var n = 0, i = 0; i < t.length; i++) {
                    var s = t[i].startTime,
                      o = t[i].stopTime;
                    void 0 === o && (o = new Date()), (n += o - s);
                  }
                  return Number(n);
                }
              },
              getTimeOnAllPagesInSeconds: function () {
                for (
                  var e = [], t = Object.keys(r.startStopTimes), n = 0;
                  n < t.length;
                  n++
                ) {
                  var i = t[n],
                    s = r.getTimeOnPageInSeconds(i);
                  e.push({ pageName: i, timeOnPage: s });
                }
                return e;
              },
              setIdleDurationInSeconds: function (e) {
                var t = parseFloat(e);
                if (!1 !== isNaN(t))
                  throw {
                    name: "InvalidDurationException",
                    message:
                      "An invalid duration time (" + e + ") was provided.",
                  };
                return (r.idleTimeoutMs = 1e3 * e), this;
              },
              setCurrentPageName: function (e) {
                return (r.currentPageName = e), this;
              },
              resetRecordedPageTime: function (e) {
                delete r.startStopTimes[e];
              },
              resetAllRecordedPageTimes: function () {
                for (
                  var e = Object.keys(r.startStopTimes), t = 0;
                  t < e.length;
                  t++
                )
                  r.resetRecordedPageTime(e[t]);
              },
              resetIdleCountdown: function () {
                r.idle && r.triggerUserHasReturned(),
                  (r.idle = !1),
                  (r.currentIdleTimeMs = 0);
              },
              callWhenUserLeaves: function (e, t) {
                this.userLeftCallbacks.push({
                  callback: e,
                  numberOfTimesToInvoke: t,
                });
              },
              callWhenUserReturns: function (e, t) {
                this.userReturnCallbacks.push({
                  callback: e,
                  numberOfTimesToInvoke: t,
                });
              },
              triggerUserHasReturned: function () {
                if (!r.active)
                  for (var e = 0; e < this.userReturnCallbacks.length; e++) {
                    var t = this.userReturnCallbacks[e],
                      n = t.numberOfTimesToInvoke;
                    (isNaN(n) || void 0 === n || 0 < n) &&
                      ((t.numberOfTimesToInvoke -= 1), t.callback());
                  }
                r.startTimer();
              },
              triggerUserHasLeftPage: function () {
                if (r.active)
                  for (var e = 0; e < this.userLeftCallbacks.length; e++) {
                    var t = this.userLeftCallbacks[e],
                      n = t.numberOfTimesToInvoke;
                    (isNaN(n) || void 0 === n || 0 < n) &&
                      ((t.numberOfTimesToInvoke -= 1), t.callback());
                  }
                r.stopAllTimers();
              },
              callAfterTimeElapsedInSeconds: function (e, t) {
                r.timeElapsedCallbacks.push({
                  timeInSeconds: e,
                  callback: t,
                  pending: !0,
                });
              },
              checkState: function () {
                for (var e = 0; e < r.timeElapsedCallbacks.length; e++)
                  r.timeElapsedCallbacks[e].pending &&
                    r.getTimeOnCurrentPageInSeconds() >
                      r.timeElapsedCallbacks[e].timeInSeconds &&
                    (r.timeElapsedCallbacks[e].callback(),
                    (r.timeElapsedCallbacks[e].pending = !1));
                !1 === r.idle && r.currentIdleTimeMs > r.idleTimeoutMs
                  ? ((r.idle = !0), r.triggerUserHasLeftPage())
                  : (r.currentIdleTimeMs += r.checkStateRateMs);
              },
              visibilityChangeEventName: void 0,
              hiddenPropName: void 0,
              listenForVisibilityEvents: function () {
                void 0 !== document.hidden
                  ? ((r.hiddenPropName = "hidden"),
                    (r.visibilityChangeEventName = "visibilitychange"))
                  : void 0 !== document.mozHidden
                  ? ((r.hiddenPropName = "mozHidden"),
                    (r.visibilityChangeEventName = "mozvisibilitychange"))
                  : void 0 !== document.msHidden
                  ? ((r.hiddenPropName = "msHidden"),
                    (r.visibilityChangeEventName = "msvisibilitychange"))
                  : void 0 !== document.webkitHidden &&
                    ((r.hiddenPropName = "webkitHidden"),
                    (r.visibilityChangeEventName = "webkitvisibilitychange")),
                  document.addEventListener(
                    r.visibilityChangeEventName,
                    function () {
                      document[r.hiddenPropName]
                        ? r.triggerUserHasLeftPage()
                        : r.triggerUserHasReturned();
                    },
                    !1
                  ),
                  window.addEventListener("blur", function () {
                    r.triggerUserHasLeftPage();
                  }),
                  window.addEventListener("focus", function () {
                    r.triggerUserHasReturned();
                  }),
                  document.addEventListener("mousemove", function () {
                    r.resetIdleCountdown();
                  }),
                  document.addEventListener("keyup", function () {
                    r.resetIdleCountdown();
                  }),
                  document.addEventListener("touchstart", function () {
                    r.resetIdleCountdown();
                  }),
                  window.addEventListener("scroll", function () {
                    r.resetIdleCountdown();
                  }),
                  setInterval(function () {
                    r.checkState();
                  }, r.checkStateRateMs);
              },
              websocket: void 0,
              websocketHost: void 0,
              setUpWebsocket: function (e) {
                if (window.WebSocket && e) {
                  var t = e.websocketHost;
                  try {
                    (r.websocket = new WebSocket(t)),
                      (window.onbeforeunload = function () {
                        r.sendCurrentTime(e.appId);
                      }),
                      (r.websocket.onopen = function () {
                        r.sendInitWsRequest(e.appId);
                      }),
                      (r.websocket.onerror = function (e) {
                        console &&
                          console.log(
                            "Error occurred in websocket connection: " + e
                          );
                      }),
                      (r.websocket.onmessage = function (e) {
                        console && console.log(e.data);
                      });
                  } catch (e) {
                    console &&
                      console.error(
                        "Failed to connect to websocket host.  Error:" + e
                      );
                  }
                }
                return this;
              },
              websocketSend: function (e) {
                r.websocket.send(JSON.stringify(e));
              },
              sendCurrentTime: function (e) {
                var t = {
                  type: "INSERT_TIME",
                  appId: e,
                  timeOnPageMs: r.getTimeOnCurrentPageInMilliseconds(),
                  pageName: r.currentPageName,
                };
                r.websocketSend(t);
              },
              sendInitWsRequest: function (e) {
                var t = { type: "INIT", appId: e };
                r.websocketSend(t);
              },
              initialize: function (e) {
                var t = r.idleTimeoutMs || 30,
                  n = r.currentPageName || "default-page-name",
                  i = void 0,
                  s = void 0;
                e &&
                  ((t = e.idleTimeoutInSeconds || t),
                  (n = e.currentPageName || n),
                  (i = e.websocketOptions),
                  (s = e.initialStartTime)),
                  r
                    .setIdleDurationInSeconds(t)
                    .setCurrentPageName(n)
                    .setUpWebsocket(i)
                    .listenForVisibilityEvents(),
                  r.startTimer(void 0, s);
              },
            };
            return r;
          }),
          "undefined" != typeof module && module.exports
            ? (module.exports = t())
            : "function" == typeof define && define.amd
            ? define([], function () {
                return (e.TimeMe = t());
              })
            : (e.TimeMe = t());
      }.call(this));

      TimeMe.initialize({
        currentPageName: "task",
        idleTimeoutInSeconds: 30,
      });
      $("button.btn-link").on("click",function(e){
    //Not sure why I need this, but otherwise accordion submits immediately
    e.preventDefault();
    event = e;
    //console.log(e.target);
  });
      $("#submitButton").on("click",function(e){
        var val = validate();
        if (!val) {
        e.preventDefault();
        event = e;
        $("#submitAlert").show();
        setTimeout(function(){
            $("#submitAlert").hide(300);
        }, 10000);
        } else {
        // sendWorkerInfo();
        $("#clickedSubmitTime").val((new Date()).getTime());
        console.log("Submitted");
        }
    });
      
      
      
      function toggleConsent(checked) {
        if (checked) {
          if (!consentChecked) {
            consentChecked = true;
          }
          $("#actualTask").show();
          $("#consentMessage").hide();
          $("#clickedConsentTime").val(new Date().getTime());
        } else {
          $("#actualTask").hide();
          $("#consentMessage").show();
        }
      }
      
      
      
      
    </script>

    <style id="hitpub_css">
      /***********************************************
      MOSAIC BOOSTRAP OVERWRITES
      ***********************************************/
      #hitinfo .card {
        border-radius: 0;
      }
      #hitinfo button.btn-link {
        color: #fff;
        text-decoration: none;
      }
      #hitinfo button.btn-link:hover {
        text-decoration: none;
      }
      #hit ul.question-choice {
        list-style-type: none;
      }
      /***********************************************
      MOSAIC GENERAL STYLING
      ***********************************************/
      body {
        font-family: "Open Sans", "Roboto", sans-serif;
        line-height: 1.25;
      }
      textarea#feedback {
        width: 100%;
      }
      input#submitButton {
        margin: auto;
        display: block;
        background-color: #2172a4;
        color: #fff;
        font-size: 1.125rem;
        padding: 0.5rem 1rem;
        cursor: pointer;
        border-radius: 1rem;
      }
      input#submitButton:hover {
        background-color: #06486f;
      }
      input[type="radio"] {
        cursor: pointer;
      }
      li {
        margin: 0.6em;
      }
      ul.ex li {
        font-size: 85%;
      }
      table {
        width: 90%;
        margin: 5px;
        
      }
      tr {
        border: 1px solid #ccc;
      }
      th {
        width: 20%;
        background-color: #fff;
        font-weight: normal;
        text-align: center;
        padding: 0.5em;
      }
      td {
        padding-left: 20px;
        padding-right: 10px;
      }
      html,
      body {
        padding: 0;
        margin: 0;
      }

      /***********************************************
      Likert scale styling
      ***********************************************/
      .wrap {
        font: 12px Arial, san-serif;
      }
      h1.likert-header {
        padding-left: 4.25%;
        margin: 20px 0 0;
      }
      form .statement {
        display: block;
        font-size: 14px;
        font-weight: bold;
        padding: 30px 0 0 4.25%;
        margin-bottom: 10px;
      }
      form .likert {
        list-style: none;
        width: 100%;
        margin: 0;
        padding: 0 0 35px;
        display: block;
        /* border-bottom:2px solid #efefef; */
      }
      form .likert:last-of-type {
        border-bottom: 0;
      }
      form .likert:before {
        content: "";
        position: relative;
        top: 11px;
        left: 9.5%;
        display: table-row;
        background-color: #efefef;
        height: 4px;
        width: 78%;
      }
      form .likert li {
        display: inline-block;
        width: 5%;
        text-align: center;
        vertical-align: top;
        display: table-cell;
      }
      form .likert li input[type="radio"] {
        display: block;
        position: relative;
        top: 0;
        left: 50%;
        margin-left: -6px;
      }
      form .likert li label {
        width: 100%;
      }
      form .buttons {
        margin: 30px 0;
        padding: 0 4.25%;
        text-align: right;
      }
      form .buttons button {
        padding: 5px 10px;
        background-color: #67ab49;
        border: 0;
        border-radius: 3px;
      }
      form .buttons .clear {
        background-color: #e9e9e9;
      }
      form .buttons .submit {
        background-color: #67ab49;
      }
      form .buttons .clear:hover {
        background-color: #ccc;
      }
      form .buttons .submit:hover {
        background-color: #14892c;
      }
      .form-range {
        width: 100%;
        height: 1.5rem;
        padding: 0;
        /* background-color: transparent; */
        /* -webkit-appearance: none; */
        /* -moz-appearance: none; */
        /* appearance: none;  */
      }
      input[type="range"] {
        -webkit-appearance: none;
        margin-right: 15px;
        width: 100%;
        height: 7px;
        background: lightgray;
        border-radius: 5px;
        position: relative;
        /* background-image: linear-gradient(#ff4500, #ff4500); */
        /* background-size: 70% 100%; */
        /* background-repeat: no-repeat; */
      }
      .ticks {
        display: flex;
        justify-content: space-between;
        padding: 10px 10px * 2;
      }
      .tick {
        position: relative;
        display: flex;
        justify-content: center;
        /* width: 1px; */
        color: gray;

        /* height: 10px;
      line-height: 10px * 5; */
        margin-bottom: 10px;
        margin-top: 10px;
      }

      /***********************************************
      TASK STYLING
      ***********************************************/
      .story-excerpt {
        margin:10pt auto;
        border-radius: 1em;
        background-color: #BFABCB;
        padding: 1em;
        display:table;
        
    }
    tr.questiondiv {
        border: none;
    }
    td.questiondiv {
        border: none;
    }

    /***********************************************
      TASK TOGGLING
      ***********************************************/
    /*
    span.task_sentiment {display:none;}
    tr.task_sentiment {display:none;}
    */

    span.task_formality {display:none;}
    tr.task_formality {display:none;}

    span.task_toxicity {display:none;}
    tr.task_toxicity {display:none;}
    
    

      
    </style>
  </div>
</html>
